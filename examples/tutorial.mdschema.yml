# yaml-language-server: $schema=../schema.json
#
# Example schema for tutorial documentation
# Ensures step-by-step guides follow a consistent format
#
# The `count` feature allows matching multiple sections with the same pattern
# and validating each one independently.

structure:
  - heading:
      pattern: "# .*"
    children:
      - heading: "## Prerequisites"
        required_text:
          - "install"

      - heading: "## Steps"
        children:
          # count: min 1 means at least 1 step required
          # count: max 0 means unlimited steps allowed
          # Each matched step is validated for code_blocks
          - heading:
              pattern: "### Step [0-9]+: .*"
            count:
              min: 1
              max: 0  # unlimited
            code_blocks:
              - { min: 1 }

      - heading: "## Troubleshooting"
        optional: true

      - heading: "## Next Steps"
        optional: true
